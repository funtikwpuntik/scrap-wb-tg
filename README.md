# scrap-wb-tg

## Telegram-бот для парсинга карточки товара на Wildberries и интеграция с Google-таблицами. 
## По артикулу товара на Wildberries берет данные с карточки и сохраняет их в Google-таблицах.

### Для запуска проекта
- Скачать проект
- Установить зависимости
- Создать "Service account" в google console
- Получить данные для доступа к API google таблиц в виде json-файла и сохранить под именем service.json
- Создать таблицу
- Добавить созданный аккаунт в настройках доступа к таблице в качестве редактора
- Создать файл .env, где прописать BOT_API и ключ google таблицы
- Запустить _main.py_

### Основной функционал
- Бот принимает артикул карточки товара на ВБ и парсит данные:
  - Артикул товара
  - Название товара
  - Категория
  - Цена
  - Ссылки на изображения в виде списка 
  - Характеристики в виде Json-строки
  - Описание
  - Рейтинг
  - Количество отзывов
- Сохраняет данные в google таблицу. Каждый новый артикул добавляется снизу.
Если артикул существует, обновляет.
- Отправляет собранные данные по карточке пользователю в телеграмм вместе с изображениями
  - Из-за ограничений, сначала отправляется текст, потом первые 10 изображений (или меньше, если карточка располагает меньшим количество)
- Реализована команда _/exp_, которая позволяет скачать всю таблицу в csv файле

### Детали:
- Асинхронная обработка запросов
- Валидация артикула: проверка на корректность формата
- Обработка ошибок: реакции на недоступность Wildberries/Google API или несуществующий артикул
- Логирование ошибок в отдельный файл
- Пользовательские сообщения об ошибках в Telegram (например, «Товар не найден»)

### Стек
- Aiogram 3.17
- gspread_asyncio 2.0
- SQLAlchemy 2.0